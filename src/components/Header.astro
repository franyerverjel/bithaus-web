---
import { Menu, X } from "lucide-react";
import { Button } from "@/components/ui/button";
import { SITE_TITLE } from "../consts";
---

<!-- Header Desktop -->
<header
  class="fixed top-6 left-1/2 -translate-x-1/2 z-50 bg-background/80 backdrop-blur-md rounded-full px-6 py-4 border border-emerald-500/20 shadow-lg w-full max-w-[90%] md:max-w-[700px] hidden md:flex"
>
  <div class="flex items-center justify-between gap-12 w-full">
    <a href="/" class="flex items-center flex-shrink-0">
      <img src="/logo.svg" alt="Bithaus" class="h-6 w-auto" />
    </a>
    <nav>
      <ul class="flex space-x-6 text-sm">
        <li>
          <a
            href="/#servicios"
            class="text-muted-foreground hover:text-emerald-500 transition-colors"
          >
            Servicios
          </a>
        </li>
        <li>
          <a
            href="/#proyectos"
            class="text-muted-foreground hover:text-emerald-500 transition-colors"
          >
            Proyectos
          </a>
        </li>
        <li>
          <a
            href="/#testimonios"
            class="text-muted-foreground hover:text-emerald-500 transition-colors"
          >
            Testimonios
          </a>
        </li>
        <!-- <li>
          <a
            href="/blog"
            class="text-muted-foreground hover:text-emerald-500 transition-colors"
          >
            Blog
          </a>
        </li> -->
      </ul>
    </nav>
    <Button
      size="sm"
      className="bg-emerald-500 text-white hover:bg-emerald-600 rounded-full px-4"
    >
      Contactar
    </Button>
  </div>
</header>

<!-- Header Mobile -->
<header
  class="fixed top-4 left-4 right-4 z-50 bg-background/90 backdrop-blur-md rounded-4xl border border-emerald-500/20 shadow-lg md:hidden"
  id="mobile-header"
>
  <div class="flex items-center justify-between px-6 py-3">
    <a href="/" class="flex items-center">
      <img src="/logo.svg" alt="Bithaus" class="h-6 w-auto" />
    </a>

    <button
      id="mobile-menu-toggle"
      class="p-2 text-muted-foreground hover:text-emerald-500 transition-colors cursor-pointer"
      aria-label="Toggle menu"
    >
      <Menu className="w-5 h-5" id="menu-icon" />
      <X className="w-5 h-5 hidden" id="close-icon" />
    </button>
  </div>

  <!-- Mobile Menu -->
  <nav
    id="mobile-menu"
    class="hidden border-t border-emerald-500/20 bg-background/95 backdrop-blur-md rounded-b-4xl"
  >
    <div class="px-4 py-4 space-y-4">
      <a
        href="/#servicios"
        class="block text-muted-foreground hover:text-emerald-500 transition-colors py-2 text-sm border-b border-border/20 pb-2"
        onclick="closeMobileMenu()"
      >
        Servicios
      </a>
      <a
        href="/#proyectos"
        class="block text-muted-foreground hover:text-emerald-500 transition-colors py-2 text-sm border-b border-border/20 pb-2"
        onclick="closeMobileMenu()"
      >
        Proyectos
      </a>
      <a
        href="/#testimonios"
        class="block text-muted-foreground hover:text-emerald-500 transition-colors py-2 text-sm border-b border-border/20 pb-2"
        onclick="closeMobileMenu()"
      >
        Testimonios
      </a>
      <!-- <a
        href="/blog"
        class="block text-muted-foreground hover:text-emerald-500 transition-colors py-2 text-sm border-b border-border/20 pb-2"
        onclick="closeMobileMenu()"
      >
        Blog
      </a> -->
      <div class="pt-2">
        <Button
          size="sm"
          className="bg-emerald-500 text-white hover:bg-emerald-600 rounded-xl px-6 w-full"
        >
          Contactar
        </Button>
      </div>
    </div>
  </nav>
</header>

<script>
  function toggleMobileMenu() {
    const menu = document.getElementById("mobile-menu");
    const menuIcon = document.getElementById("menu-icon");
    const closeIcon = document.getElementById("close-icon");

    if (menu && menuIcon && closeIcon) {
      const isHidden = menu.classList.contains("hidden");

      if (isHidden) {
        menu.classList.remove("hidden");
        menuIcon.classList.add("hidden");
        closeIcon.classList.remove("hidden");
      } else {
        menu.classList.add("hidden");
        menuIcon.classList.remove("hidden");
        closeIcon.classList.add("hidden");
      }
    }
  }

  function closeMobileMenu() {
    const menu = document.getElementById("mobile-menu");
    const menuIcon = document.getElementById("menu-icon");
    const closeIcon = document.getElementById("close-icon");

    if (menu && menuIcon && closeIcon) {
      menu.classList.add("hidden");
      menuIcon.classList.remove("hidden");
      closeIcon.classList.add("hidden");
    }
  }

  // Event listeners
  document.addEventListener("DOMContentLoaded", function () {
    const toggle = document.getElementById("mobile-menu-toggle");
    if (toggle) {
      toggle.addEventListener("click", toggleMobileMenu);
    }

    // Close menu when clicking outside
    document.addEventListener("click", function (event) {
      const header = document.getElementById("mobile-header");
      const menu = document.getElementById("mobile-menu");

      if (
        header &&
        menu &&
        event.target instanceof Node &&
        !header.contains(event.target) &&
        !menu.classList.contains("hidden")
      ) {
        closeMobileMenu();
      }
    });

    // Close menu on escape key
    document.addEventListener("keydown", function (event) {
      if (event.key === "Escape") {
        closeMobileMenu();
      }
    });
  });
</script>
